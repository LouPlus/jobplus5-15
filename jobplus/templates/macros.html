{% macro render_form(form,url, upload_file=False) %}
{% if not upload_file %}
<form method='POST' action='{{ url }}'>
{% else %}
<form method='POST' enctype='multipart/form-data' action='{{ url }}'>
{% endif %}

    {{ form.csrf_token }}
    {% for field in form %}
      {% if field.type == 'CSRFTokenField' %}
        {{ '' }}
      {% elif field.type == 'SubmitField' %}
        {{ form.submit(class='btn btn-primary',type='submit') }}
      {% elif field.type == 'BooleanField' %}
        <div class='checkbox'>
            <label>{{ field() }}{{ field.label.text }}</label>
        </div>
      {% else %}
          <!-- 验证表单错误信息 -->
        <div class='form-group {% if field.errors %}has-error{% endif %} '>
          {{ field.label }}{{ field(class='form-control') }}

          {% if field.errors %} 
              {% for error in field.errors %}
              <span class='help-block'>{{ error }}</span>
              {% endfor %}
          {% endif %}
      {% endif %}
    {% endfor %}
  </form>
{% endmacro %}


{% macro render_pagination(pagination, endpoint) %}
  <nav class='nav-pagination' aria-label='Page navigation'>
    <ul class="pagination">
      <li {% if not pagination.has_prev %} class='disabled' {% endif %}>
        <a href="{{ url_for(endpoint, page=pagination.prev_num) if pagination.has_prev else '#'}}">&laquo;</a>
      </li>
      {% for page in pagination.iter_pages() %}
        {% if page %}
          {% if page != pagination.page %}
            <li><a href="{{ url_for(endpoint, page=page) }}">{{ page }}</a></li>
          {% else %}
            <li class='active'><a href='#'>{{ page }}</a></li>
          {% endif %}
        {% else %}
          <li><span class='ellipsis'>...</span></li>
        {% endif %}
      {% endfor %}
      <li {% if not pagination.has_next %} class='disabled' {% endif %}>
        <a href="{{ url_for(endpoint, page=pagination.next_num) if pagination.has_next else '#' }}">&raquo;</a>
      </li>
    </ul>
  </nav>
{% endmacro %}


{% macro render_job(job) %}
<div class="col-sm-6 col-md-4">
  <div class="job-box">
    <div class="caption">
      <a href="{{ url_for('job.job_msg', job_id=job.id) }}">
        <p class='company_name'><b>{{ job.name }}</b></p>
        <p>经验{{ job.experience_requirement }} {% if job.experience_requirement != '不限' %}{% endif %} 学历{{ job.degree_requirement }}</p>
        {% for tag in job.tag_list %}
          <span class="label label-default">{{ tag }}</span>
        {% endfor %}
        {% if not job.tag_list %}
          <br>
        {% endif %}
      </a>
    </div>
    <hr>
    <div class="media">
      <a href="{{ url_for('company.company_msg', company_id=job.company.id) }}">
        <div class="media-left">
          <img class="media-object" src="{{ job.company.company_msg.logo }}" width="100" height="100" alt="...">
        </div>
        <div class="media-body">
          <h4 class="media-heading company_name">{{ job.company.name }}</h4>
          <span class="company-meta">{{ job.salary }}/{{ job.company.company_msg.tags }}{{ job.company.company_msg.finance_stage }}/{{ job.company.company_msg.address }}</span>
        </div>
      </a>
    </div>
  </div>
</div>
{% endmacro %}


{% macro render_company(company) %}
<div class="col-sm-6 col-md-4 company-item">
  <div class="thumbnail">
    <a href="{{ url_for('company.company_msg', company_id=company.id) }}" target='_blank'>
      <img src="{{ company.company_msg.logo }}" width="100" height="100" alt="...">
      <h3 align='center'>{{ company.name }}</h3>
      <hr>
      <p align='center'>在招职位: {{ company.jobs.count() }}</p>
    </a>
  </div>
</div>
{% endmacro %}

{% macro render_pagination_company_jobs(pagination, endpoint, company_id)  %}
<nav class="nav-pagination" aria-label="Page pagination">
    <ul class="pagination">
    <li{% if not pagination.has_prev %} class="disabled"{% endif %}><a href="{{url_for(endpoint, page=pagination.prev_num, company_id=company_id) if pagination.has_prev else '#'}}">&laquo;</a></li>
    {% for page in pagination.iter_pages() %}
        {% if page %}
            {% if page != pagination.page %}
            <li><a href="{{ url_for(endpoint, page=page, company_id=company_id) }}">{{ page }}</a></li>
            {% else %}
            <li class="active"><a href="#">{{page}} <span class="sr-only">(current)</span></a></li>
            {% endif %}
        {% else %}
             <li><span class="ellipsis">...</span></li>
        {% endif %}
    {% endfor %}
    <li{% if not pagination.has_next %} class="disabled"{% endif %}><a href="{{url_for(endpoint, page=pagination.next_num, company_id=company_id) if pagination.has_next else "#"}}">&raquo;</a></li>
    </ul>
</nav>
{% endmacro %}
